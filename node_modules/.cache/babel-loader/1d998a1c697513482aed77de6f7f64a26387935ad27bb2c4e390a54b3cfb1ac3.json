{"ast":null,"code":"import _objectSpread from\"C:/Users/prince kumar/Desktop/ProjectRest/Frontend/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{useParams,useNavigate}from'react-router-dom';import axios from'axios';import{useCart}from'../CartContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE_URL=\"https://restaurent-backend-h5p7.onrender.com\";const ItemDetail=()=>{var _item$category;const{id}=useParams();const[item,setItem]=useState(null);// ðŸŸ¢ SETTING DEFAULT TO 'Half' as per your requirement\nconst[size,setSize]=useState('Half');const[added,setAdded]=useState(false);const{addToCart}=useCart();const navigate=useNavigate();useEffect(()=>{axios.get(\"\".concat(API_BASE_URL,\"/api/foods\")).then(res=>{const found=res.data.find(f=>f._id===id);setItem(found);// Logic: If for some reason there is NO halfPrice, only then default to Full\nif(found&&!found.halfPrice&&found.fullPrice){setSize('Full');}});},[id]);if(!item)return/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',marginTop:50},children:\"Loading...\"});const getPrice=()=>{if(size==='Half'){return item.halfPrice;}return item.fullPrice||item.price;};const currentPrice=getPrice();const handleAddToCart=()=>{if(!currentPrice){alert(\"Price not available for this portion.\");return;}addToCart(_objectSpread(_objectSpread({},item),{},{_id:item._id+size,originalId:item._id,// Updated name to include the ML volume in cart too\nname:\"\".concat(item.name,\" (\").concat(size==='Half'?'350ml':'500ml',\")\"),price:currentPrice,selectedSize:size}));setAdded(true);setTimeout(()=>setAdded(false),1000);};return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:600,margin:'40px auto',background:'#fff',borderRadius:12,boxShadow:'0 2px 12px #eee',padding:24},children:[/*#__PURE__*/_jsx(\"img\",{src:item.image&&item.image.startsWith('http')?item.image:\"\".concat(API_BASE_URL,\"/\").concat(item.image),alt:item.name,onError:e=>{e.target.src='https://via.placeholder.com/600x400?text=Shyam+Bhojnalaya';},style:{width:'100%',height:300,objectFit:'cover',borderRadius:10,marginBottom:24}}),/*#__PURE__*/_jsx(\"h2\",{children:item.name}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#e67e22',fontWeight:'bold',fontSize:24},children:currentPrice?\"\\u20B9\".concat(currentPrice):'Price Unavailable'}),/*#__PURE__*/_jsx(\"p\",{children:item.description}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'#888',fontSize:14},children:[\"Category: \",((_item$category=item.category)===null||_item$category===void 0?void 0:_item$category.name)||'N/A']}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:'20px 0',display:'flex',gap:'10px',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold'},children:\"Portion:\"}),item.halfPrice&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSize('Half'),style:size==='Half'?activeSizeBtn:inactiveSizeBtn,children:\"Half (350ml)\"}),(item.fullPrice||item.price)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSize('Full'),style:size==='Full'?activeSizeBtn:inactiveSizeBtn,children:\"Full (500ml)\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{borderTop:'1px solid #eee',paddingTop:20,marginTop:20},children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleAddToCart,disabled:!currentPrice||added,style:{padding:'12px 30px',background:added?'#27ae60':'#222',color:'#fff',border:'none',borderRadius:6,fontWeight:'bold',cursor:!currentPrice||added?'not-allowed':'pointer',transition:'0.3s',opacity:!currentPrice?0.5:1},children:added?\"âœ” Added\":\"Add to Thali \".concat(currentPrice?\"(\\u20B9\".concat(currentPrice,\")\"):'')}),/*#__PURE__*/_jsx(\"button\",{style:{marginLeft:16,padding:'12px 30px',background:'#eee',color:'#222',border:'none',borderRadius:6,fontWeight:'bold',cursor:'pointer'},onClick:()=>navigate('/'),children:\"Back to Menu\"})]})]});};// --- Styles ---\nconst baseSizeBtn={padding:'10px 15px',borderRadius:'8px',cursor:'pointer',fontWeight:'bold',fontSize:'14px',border:'1px solid #ddd',transition:'all 0.2s ease'};const activeSizeBtn=_objectSpread(_objectSpread({},baseSizeBtn),{},{background:'#e67e22',color:'#fff',border:'1px solid #e67e22',boxShadow:'0 2px 5px rgba(230, 126, 34, 0.3)'});const inactiveSizeBtn=_objectSpread(_objectSpread({},baseSizeBtn),{},{background:'#fff',color:'#555'});export default ItemDetail;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","axios","useCart","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","ItemDetail","_item$category","id","item","setItem","size","setSize","added","setAdded","addToCart","navigate","get","concat","then","res","found","data","find","f","_id","halfPrice","fullPrice","style","textAlign","marginTop","children","getPrice","price","currentPrice","handleAddToCart","alert","_objectSpread","originalId","name","selectedSize","setTimeout","maxWidth","margin","background","borderRadius","boxShadow","padding","src","image","startsWith","alt","onError","e","target","width","height","objectFit","marginBottom","color","fontWeight","fontSize","description","category","display","gap","alignItems","onClick","activeSizeBtn","inactiveSizeBtn","borderTop","paddingTop","disabled","border","cursor","transition","opacity","marginLeft","baseSizeBtn"],"sources":["C:/Users/prince kumar/Desktop/ProjectRest/Frontend/frontend/src/pages/ItemDetail.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { useCart } from '../CartContext';\r\n\r\nconst API_BASE_URL = \"https://restaurent-backend-h5p7.onrender.com\";\r\n\r\nconst ItemDetail = () => {\r\n  const { id } = useParams();\r\n  const [item, setItem] = useState(null);\r\n  \r\n  // ðŸŸ¢ SETTING DEFAULT TO 'Half' as per your requirement\r\n  const [size, setSize] = useState('Half'); \r\n  const [added, setAdded] = useState(false);\r\n  const { addToCart } = useCart();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    axios.get(`${API_BASE_URL}/api/foods`)\r\n      .then(res => {\r\n        const found = res.data.find(f => f._id === id);\r\n        setItem(found);\r\n        \r\n        // Logic: If for some reason there is NO halfPrice, only then default to Full\r\n        if (found && !found.halfPrice && found.fullPrice) {\r\n          setSize('Full');\r\n        }\r\n      });\r\n  }, [id]);\r\n\r\n  if (!item) return <div style={{ textAlign: 'center', marginTop: 50 }}>Loading...</div>;\r\n\r\n  const getPrice = () => {\r\n    if (size === 'Half') {\r\n      return item.halfPrice; \r\n    }\r\n    return item.fullPrice || item.price; \r\n  };\r\n\r\n  const currentPrice = getPrice();\r\n\r\n  const handleAddToCart = () => {\r\n    if (!currentPrice) {\r\n      alert(\"Price not available for this portion.\");\r\n      return;\r\n    }\r\n\r\n    addToCart({\r\n      ...item,\r\n      _id: item._id + size, \r\n      originalId: item._id, \r\n      // Updated name to include the ML volume in cart too\r\n      name: `${item.name} (${size === 'Half' ? '350ml' : '500ml'})`, \r\n      price: currentPrice, \r\n      selectedSize: size\r\n    });\r\n    setAdded(true);\r\n    setTimeout(() => setAdded(false), 1000);\r\n  };\r\n\r\n  return (\r\n    <div style={{ maxWidth: 600, margin: '40px auto', background: '#fff', borderRadius: 12, boxShadow: '0 2px 12px #eee', padding: 24 }}>\r\n      <img\r\n        src={item.image && item.image.startsWith('http') ? item.image : `${API_BASE_URL}/${item.image}`}\r\n        alt={item.name}\r\n        onError={(e) => { e.target.src = 'https://via.placeholder.com/600x400?text=Shyam+Bhojnalaya'; }}\r\n        style={{ width: '100%', height: 300, objectFit: 'cover', borderRadius: 10, marginBottom: 24 }}\r\n      />\r\n      \r\n      <h2>{item.name}</h2>\r\n      \r\n      {/* ðŸ”´ Updated Price Display based on selection */}\r\n      <p style={{ color: '#e67e22', fontWeight: 'bold', fontSize: 24 }}>\r\n        {currentPrice ? `â‚¹${currentPrice}` : 'Price Unavailable'}\r\n      </p>\r\n\r\n      <p>{item.description}</p>\r\n      <p style={{ color: '#888', fontSize: 14 }}>Category: {item.category?.name || 'N/A'}</p>\r\n\r\n      {/* ðŸŸ¢ PORTION SELECTOR WITH ML LABELS */}\r\n      <div style={{ margin: '20px 0', display: 'flex', gap: '10px', alignItems: 'center' }}>\r\n        <span style={{ fontWeight: 'bold' }}>Portion:</span>\r\n        \r\n        {item.halfPrice && (\r\n          <button \r\n            onClick={() => setSize('Half')}\r\n            style={size === 'Half' ? activeSizeBtn : inactiveSizeBtn}\r\n          >\r\n            Half (350ml)\r\n          </button>\r\n        )}\r\n\r\n        {(item.fullPrice || item.price) && (\r\n          <button \r\n            onClick={() => setSize('Full')}\r\n            style={size === 'Full' ? activeSizeBtn : inactiveSizeBtn}\r\n          >\r\n            Full (500ml)\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      <div style={{ borderTop: '1px solid #eee', paddingTop: 20, marginTop: 20 }}>\r\n        <button\r\n          onClick={handleAddToCart}\r\n          disabled={!currentPrice || added}\r\n          style={{\r\n            padding: '12px 30px',\r\n            background: added ? '#27ae60' : '#222',\r\n            color: '#fff',\r\n            border: 'none',\r\n            borderRadius: 6,\r\n            fontWeight: 'bold',\r\n            cursor: (!currentPrice || added) ? 'not-allowed' : 'pointer',\r\n            transition: '0.3s',\r\n            opacity: !currentPrice ? 0.5 : 1\r\n          }}\r\n        >\r\n          {added ? \"âœ” Added\" : `Add to Thali ${currentPrice ? `(â‚¹${currentPrice})` : ''}`}\r\n        </button>\r\n        \r\n        <button\r\n          style={{\r\n            marginLeft: 16,\r\n            padding: '12px 30px',\r\n            background: '#eee',\r\n            color: '#222',\r\n            border: 'none',\r\n            borderRadius: 6,\r\n            fontWeight: 'bold',\r\n            cursor: 'pointer'\r\n          }}\r\n          onClick={() => navigate('/')}\r\n        >\r\n          Back to Menu\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- Styles ---\r\nconst baseSizeBtn = {\r\n  padding: '10px 15px',\r\n  borderRadius: '8px',\r\n  cursor: 'pointer',\r\n  fontWeight: 'bold',\r\n  fontSize: '14px',\r\n  border: '1px solid #ddd',\r\n  transition: 'all 0.2s ease'\r\n};\r\n\r\nconst activeSizeBtn = {\r\n  ...baseSizeBtn,\r\n  background: '#e67e22',\r\n  color: '#fff',\r\n  border: '1px solid #e67e22',\r\n  boxShadow: '0 2px 5px rgba(230, 126, 34, 0.3)'\r\n};\r\n\r\nconst inactiveSizeBtn = {\r\n  ...baseSizeBtn,\r\n  background: '#fff',\r\n  color: '#555'\r\n};\r\n\r\nexport default ItemDetail;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}